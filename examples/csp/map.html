<!DOCTYPE html>
	<head>
	<title>Babelsberg/JS Map Coloring</title>
	
	<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.2.0/prototype.js"></script>
	<script type="text/javascript">
	  CommandLineInterface = {};
	  CommandLineInterface.cwd = function () { return "Fake path" };
	  CommandLineZ3Path = "fakez3path";
	</script>
	<!-- <script src="http://www.lively-kernel.org/babelsberg/babelsberg.core.js"></script> -->
	<script src="../../standalone/minilively.js"></script>
	<script src="../../cop/Layers.js"></script>
	<script src="../../ometa/lib.js"></script>
	<script src="../../ometa/ometa-base.js"></script>
	<script src="../../ometa/parser.js"></script>
	<script src="../../ometa/ChunkParser.js"></script>
	<script src="../../ometa/bs-ometa-compiler.js"></script>
	<script src="../../ometa/bs-js-compiler.js"></script>
	<script src="../../ometa/bs-ometa-js-compiler.js"></script>
	<script src="../../ometa/bs-ometa-optimizer.js"></script>
	<script src="../../ometa/lk-parser-extensions.js"></script>
	<script src="../../ometa/Ometa.js"></script>
	<script src="../../jsinterpreter/generated/Nodes.js"></script>
	<script src="../../jsinterpreter/generated/Translator.js"></script>
	<script src="../../jsinterpreter/LivelyJSParser.js"></script>
	<script src="../../jsinterpreter/Parser.js"></script>
	<script src="../../jsinterpreter/Meta.js"></script>
	<script src="../../jsinterpreter/Rewriting.js"></script>
	<script src="../../jsinterpreter/Interpreter.js"></script>
	<!-- // Cassowary -->
	<script src="../../cassowary/Hashtable.js"></script>
	<script src="../../cassowary/HashSet.js"></script>
	<script src="../../cassowary/DwarfCassowary.js"></script>
	<script src="../../babelsberg/cassowary_ext.js"></script>

	<script src="../../../babelsberg/core_ext.js"></script>
	<script src="../../../babelsberg/constraintinterpreter.js"></script>
	<script src="../../babelsberg/uglify.js"></script>
	<script src="../../babelsberg/src_transform.js"></script>
	<script src="../../standalone/babelsbergscript.js"></script>
	<!-- // Relax -->
	<script src="../../sutherland/relax.js"></script>
	<script src="../../sutherland/relax_bbb.js"></script>

	<!-- <script src="http://www.lively-kernel.org/babelsberg/babelsberg.sutherland.js"></script> -->
	<!-- <script src="http://www.lively-kernel.org/babelsberg/babelsberg.csp.js"></script> -->

	<script src="../../backtalk/backtalk.js"></script>
	<script src="../../backtalk/constraints.js"></script>
	<script src="../../backtalk/backtalk_ext.js"></script>	

	<!-- <script src="http://www.lively-kernel.org/babelsberg/babelsberg.backtalk.js"></script> -->
	<script src="http://www.lively-kernel.org/babelsberg/babelsberg.z3.js"></script>
	<!-- 
         !-- <script src="../../z3/NaClZ3.js"></script>
	 !-- <script src="../../z3/CommandLineServerInterface.js"></script>
	 !-- <script src="../../z3/CommandLineZ3.js"></script>
	 !-- <script src="../../z3/emz3/EmZ3.js"></script>
          -->
	<script src="d3.v3.min.js"></script>
	<script src="queue.v1.min.js"></script>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

	<script src="Intersection.js"></script>
	<script src="map.js"></script>

	<script src="../../csp/underscore-min.js"></script>
	<!-- 
         !-- <script src="../../csp/csp.js"></script>
	 !-- <script src="../../babelsberg/csp_ext.js"></script>
          -->

	</head>
	<body>
	  <select id="solver">
	    <option value="[new BacktalkSolver()]">Backtalk</option>
	    <option value="[new Relax()]">Sutherland's Relaxation</option>
	    <option value="[new ClSimplexSolver()]">Cassowary</option>
	    <!-- <option value="[new csp.Solver()]">Simple CSP</option> -->
	    <option value="[new Relax(), new ClSimplexSolver(), new BacktalkSolver()] ">Automatic selection</option>
	  </select>

          <div style="float: left; position: relative; max-height: 800px" id="colors">
	  </div>

	  <div id="times" style="float:left; position:relative; max-height: 100px; overflow-y: scroll;">
	  </div>
		
	  <canvas id="canvas"></canvas>
		
	  <div style="float: right; position: relative; max-height: 800px" id="colors"></div>

	  <details>
	    <summary>Constraints</summary>
	    <pre>
	      <code class="javascript" id="code" contenteditable="true">
// define domains for colors
this.states.forEach(function(state) {
    always: { state.color.is in colors }
    // state.color = colors[Math.floor(Math.random() * (colors.length - 1))];
});
    <!-- 
     !-- colors.forEach(function(color) {
     !--     always: {
     !--        priority: "strong"
     !--        state.color.equals(color);
     !--     }
     !-- });
      -->
this.states.forEach(function(state1, index1) {
    this.states.forEach(function(state2, index2) {
        if(index1 < index2 && state1.sharesBorderWith(state2)) {
            always: { !state1.color.equals(state2.color) }
        }
    }, this);
}, this);
	      </code>
	    </pre>
	  </details>
	  <details>
	    <summary>Log</summary>
	    <p id="consolelog" style="max-height: 800px; overflow-y: scroll;">
	    </p>
	  </details>
	</body>
</html>
